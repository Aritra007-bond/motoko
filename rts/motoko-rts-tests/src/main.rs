mod bigint;
mod closure_table;
mod utf8;

use motoko_rts::types::*;

fn main() {
    if std::mem::size_of::<usize>() != 4 {
        println!("Motoko RTS only works on 32-bit architectures");
        std::process::exit(1);
    }

    unsafe {
        closure_table::test();
        bigint::test();
        utf8::test();
    }
}

// Called by the RTS to panic
#[no_mangle]
extern "C" fn rts_trap(_msg: *const u8, _len: Bytes<u32>) -> ! {
    panic!("rts_trap_with called");
}

// Called by RTS BigInt functions to panic. Normally generated by the compiler
#[no_mangle]
extern "C" fn bigint_trap() -> ! {
    panic!("bigint_trap called");
}
